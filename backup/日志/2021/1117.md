# 异步函数

## async

可以用在: 1. 函数声明 2. 函数表达式 3. 箭头函数 4. 方法上



> async 关键字让函数有异步特征, 但总体其代码仍是同步求值

​                                                                                                                                                                                 

异步函数始终会根据 return 值返回一个 Promise 对象(通过Promise.resolve()), 进行包装



异步函数渴望但是不必须返回一个具有 `thenable` 接口的对象, 如果返回的是一个普通值, 则返回值被当做已经解决的期约



异步函数中 `throw` 一个错误, 会抛出一个被拒绝的期约.. 如果异步函数里面 return 一个拒绝的期约, 则这个错误不会被捕获, 返回的也是一个一樣的拒絕的期约





**await** 关键字渴望一个 `thenable` 接口的对象, 但不是必须, 如果是普通对象, 则这个值会被当做一个已经解决的期约





异步函数如果不包含 await 关键字, 则和普通函数没有区别





await 不是等待一个值那么简单

1. 记录哪里暂停
2. 等右边的值可用了, 会向微任务队列添加任务, 此时恢复异步函数执行
3. 即使 await 后面跟一个正常值, 也会异步求值



Promise 和 异步函数功能重叠,  异步函数, 保持的调用栈信息更少, 对重视性能的应用比较友好